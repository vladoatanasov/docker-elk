input {
	tcp {
		port => 5000
	}

	rabbitmq {
    host => "rabbitmq"
    queue => "logstash-queue"
    durable => true
    key => "logstash-key"
    exchange => "logstash-rabbitmq"
    threads => 3
    prefetch_count => 50
    port => 5672
    user => "guest"
    password => "guest"
	}

}

## Add your filters here

output {
	elasticsearch {
		hosts => "elasticsearch:9200"
	}

	rabbitmq {
    exchange => "logstash-rabbitmq"
    exchange_type => "direct"
    key => "logstash-key"
    host => "rabbitmq"
    workers => 4
    durable => true
    persistent => true
	}

}
